{"version":3,"sources":["../../../src/activity/controller/motherquestion.js"],"names":["db","activity","answerMapping","saveAction","fail","model","add","name","city","phone","q_1","q_2","q_3","q_4","q_5","q_6","q_7","q_8","q_9","q_10","q_11","id","success","getAction","res","map","k"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,KAAK,aAAGC,QAAd;;AAEA,IAAMC,gBAAgB;AAClB,UAAO,GADW;AAElB,UAAO,GAFW;AAGlB,UAAO,GAHW;AAIlB,UAAO,GAJW;AAKlB,UAAO;AALW,CAAtB;;;;;;;;;;AAUI;qBACMC,U;;;;;;;6DACK,KAAKC,IAAL,CAAU,CAAC,CAAX,EAAc,WAAd,C;;;AAmBHC,iC,GAAQ,KAAKA,KAAL,CAAW,iBAAX,EAA8BL,EAA9B,C;;mCACKK,MAAMC,GAAN,CAAU,EAACC,UAAD,EAAOC,UAAP,EAAaC,YAAb,EAAoBC,QAApB,EAAyBC,QAAzB,EAA8BC,QAA9B,EAAmCC,QAAnC,EAAwCC,QAAxC,EAA6CC,QAA7C,EAAkDC,QAAlD,EAAuDC,QAAvD,EAA4DC,QAA5D,EAAiEC,UAAjE,EAAuEC,UAAvE,EAAV,C;;;AAAXC,8B;;iCACHA,E;;;;;6DACQ,KAAKC,OAAL,CAAaD,EAAb,C;;;6DAEA,KAAKjB,IAAL,CAAU,CAAC,CAAX,EAAciB,EAAd,C;;;;;;;;;;;;;;;;;qBAKTE,S;;;;;;;8DACK,KAAKnB,IAAL,CAAU,CAAC,CAAX,EAAc,WAAd,C;;;AAEHoB,+B;;AACJA,gCAAIC,GAAJ,CAAQ,UAACC,CAAD,EAAO;AACXA,kCAAEhB,GAAF,GAAQR,cAAc,MAAIwB,EAAEhB,GAApB,CAAR;AACAgB,kCAAEf,GAAF,GAAQT,cAAc,MAAIwB,EAAEf,GAApB,CAAR;AACAe,kCAAEd,GAAF,GAAQV,cAAc,MAAIwB,EAAEd,GAApB,CAAR;AACAc,kCAAEb,GAAF,GAAQX,cAAc,MAAIwB,EAAEb,GAApB,CAAR;AACAa,kCAAEZ,GAAF,GAAQZ,cAAc,MAAIwB,EAAEZ,GAApB,CAAR;AACAY,kCAAEX,GAAF,GAAQb,cAAc,MAAIwB,EAAEX,GAApB,CAAR;AACAW,kCAAEV,GAAF,GAAQd,cAAc,MAAIwB,EAAEV,GAApB,CAAR;AACAU,kCAAET,GAAF,GAAQf,cAAc,MAAIwB,EAAET,GAApB,CAAR;AACAS,kCAAER,GAAF,GAAQhB,cAAc,MAAIwB,EAAER,GAApB,CAAR;AACH,6BAVD;8DAWO,KAAKI,OAAL,CAAaE,GAAb,C","file":"motherquestion.js","sourcesContent":["'use strict';\nimport moment from 'moment';\nimport Base from './base.js';\nimport DB from '../../db.js';\n\nconst db = DB.activity;\n\nconst answerMapping = {\n    '_1' : 'A',\n    '_2' : 'B',\n    '_3' : 'C',\n    '_4' : 'D',\n    '_5' : 'E',\n}\n\nexport default class extends Base {\n\n    // 返回所有的发布人\n    async saveAction(){\n        return this.fail(-1 ,'not allow'); \n        let param = this.post();\n        let name    = param.name,\n            city   = param.city,\n            phone   = param.phone,\n            q_1     = param.q_1,\n            q_2     = param.q_2,\n            q_3     = param.q_3,\n            q_4     = param.q_4,\n            q_5     = param.q_5,\n            q_6     = param.q_6,\n            q_7     = param.q_7,\n            q_8     = param.q_8,\n            q_9     = param.q_9,\n            q_10    = param.q_10,\n            q_11    = param.q_11;\n\n        if(!name || !phone){return this.fail(-1 ,'参数不正确'); }\n\n        let model = this.model('mother_question' ,db);\n        const id = await model.add({name ,city, phone, q_1, q_2, q_3, q_4, q_5, q_6, q_7, q_8, q_9, q_10, q_11 });\n        if(id){\n            return this.success(id);\n        }else{\n            return this.fail(-1 ,id);\n        }\n    }\n\n\n    async getAction(){\n        return this.fail(-1 ,'not allow'); \n        let model = this.model('mother_question' ,db);\n        let res = await model.field('name,phone,city,q_1,q_2,q_3,q_4,q_5,q_6,q_7,q_8,q_9').order('id desc').select();\n        res.map((k) => {\n            k.q_1 = answerMapping['_'+k.q_1];\n            k.q_2 = answerMapping['_'+k.q_2];\n            k.q_3 = answerMapping['_'+k.q_3];\n            k.q_4 = answerMapping['_'+k.q_4];\n            k.q_5 = answerMapping['_'+k.q_5];\n            k.q_6 = answerMapping['_'+k.q_6];\n            k.q_7 = answerMapping['_'+k.q_7];\n            k.q_8 = answerMapping['_'+k.q_8];\n            k.q_9 = answerMapping['_'+k.q_9];\n        });\n        return this.success(res);\n    }\n}   "]}