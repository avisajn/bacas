!function(a,b){"use strict";var c="0.7.10",d="",e="?",f="function",g="undefined",h="object",i="string",j="major",k="model",l="name",m="type",n="vendor",o="version",p="architecture",q="console",r="mobile",s="tablet",t="smarttv",u="wearable",v="embedded",w={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2===0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&b.toLowerCase().indexOf(a.toLowerCase())!==-1},lowerize:function(a){return a.toLowerCase()},major:function(a){return typeof a===i?a.split(".")[0]:b}},x={rgx:function(){for(var a,c,d,e,i,j,k,l=0,m=arguments;l<m.length&&!j;){var n=m[l],o=m[l+1];if(typeof a===g){a={};for(e in o)o.hasOwnProperty(e)&&(i=o[e],typeof i===h?a[i[0]]=b:a[i]=b)}for(c=d=0;c<n.length&&!j;)if(j=n[c++].exec(this.getUA()))for(e=0;e<o.length;e++)k=j[++d],i=o[e],typeof i===h&&i.length>0?2==i.length?typeof i[1]==f?a[i[0]]=i[1].call(this,k):a[i[0]]=i[1]:3==i.length?typeof i[1]!==f||i[1].exec&&i[1].test?a[i[0]]=k?k.replace(i[1],i[2]):b:a[i[0]]=k?i[1].call(this,k,i[2]):b:4==i.length&&(a[i[0]]=k?i[3].call(this,k.replace(i[1],i[2])):b):a[i]=k?k:b;l+=2}return a},str:function(a,c){for(var d in c)if(typeof c[d]===h&&c[d].length>0){for(var f=0;f<c[d].length;f++)if(w.has(c[d][f],a))return d===e?b:d}else if(w.has(c[d],a))return d===e?b:d;return a}},y={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},z={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,o],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],o],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],o],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[l,o],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],o],[/(edge)\/((\d+)?[\w\.]+)/i],[l,o],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],o],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[l,o],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],o],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],o],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],o],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[o,[l,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[o,[l,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[o,[l,"Facebook"]],[/fxios\/([\w\.-]+)/i],[o,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[o,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[o,l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[o,x.str,y.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,o],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,o]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,w.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[k,n,[m,s]],[/applecoremedia\/[\w\.]+ \((ipad)/],[k,[n,"Apple"],[m,s]],[/(apple\s{0,1}tv)/i],[[k,"Apple TV"],[n,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[n,k,[m,s]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[k,[n,"Amazon"],[m,s]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[k,x.str,y.device.amazon.model],[n,"Amazon"],[m,r]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[k,n,[m,r]],[/\((ip[honed|\s\w*]+);/i],[k,[n,"Apple"],[m,r]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[n,k,[m,r]],[/\(bb10;\s(\w+)/i],[k,[n,"BlackBerry"],[m,r]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[k,[n,"Asus"],[m,s]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[n,"Sony"],[k,"Xperia Tablet"],[m,s]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[n,"Sony"],[k,"Xperia Phone"],[m,r]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[n,k,[m,q]],[/android.+;\s(shield)\sbuild/i],[k,[n,"Nvidia"],[m,q]],[/(playstation\s[34portablevi]+)/i],[k,[n,"Sony"],[m,q]],[/(sprint\s(\w+))/i],[[n,x.str,y.device.sprint.vendor],[k,x.str,y.device.sprint.model],[m,r]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[n,k,[m,s]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|oppo|vivo|coolpad|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[n,[k,/_/g," "],[m,r]],[/(nexus\s9)/i],[k,[n,"HTC"],[m,s]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[k,[n,"Microsoft"],[m,q]],[/(kin\.[onetw]{3})/i],[[k,/\./g," "],[n,"Microsoft"],[m,r]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[k,[n,"Motorola"],[m,r]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[k,[n,"Motorola"],[m,s]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[n,"Samsung"],k,[m,s]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[n,"Samsung"],k,[m,r]],[/(samsung);smarttv/i],[n,k,[m,t]],[/\(dtv[\);].+(aquos)/i],[k,[n,"Sharp"],[m,t]],[/sie-(\w+)*/i],[k,[n,"Siemens"],[m,r]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[n,"Nokia"],k,[m,r]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[k,[n,"Acer"],[m,s]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[n,"LG"],k,[m,s]],[/(lg) netcast\.tv/i],[n,k,[m,t]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[k,[n,"LG"],[m,r]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[k,[n,"Lenovo"],[m,s]],[/linux;.+((jolla));/i],[n,k,[m,r]],[/((pebble))app\/[\d\.]+\s/i],[n,k,[m,u]],[/android.+;\s(glass)\s\d/i],[k,[n,"Google"],[m,u]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi .+)\s+build/i],[[k,/_/g," "],[n,"Xiaomi"],[m,r]],[/android.+(mz-[\w]+)\s+.*build/i],[[k,/_/g," "],[n,"Meizu"],[m,r]],[/android.+(moto .+)\s+build/i],[[k,/_/g," "],[n,"Motorola"],[m,r]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[m,w.lowerize],n,k]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,o],[/rv\:([\w\.]+).*(gecko)/i],[o,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[o,x.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[o,x.str,y.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[l,o],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[l,"Symbian"],o],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],o],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[l,"Linux"],o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],o],[/(sunos)\s?([\w\.]+\d)*/i],[[l,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[l,o],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[l,"iOS"],[o,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[l,o]]},A=function(b,c){if(!(this instanceof A))return new A(b,c).getResult();var e=b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:d),f=c?w.extend(z,c):z;return this.getBrowser=function(){var a=x.rgx.apply(this,f.browser);return a.major=w.major(a.version),a},this.getCPU=function(){return x.rgx.apply(this,f.cpu)},this.getDevice=function(){return x.rgx.apply(this,f.device)},this.getEngine=function(){return x.rgx.apply(this,f.engine)},this.getOS=function(){return x.rgx.apply(this,f.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(a){return e=a,this},this};A.VERSION=c,A.BROWSER={NAME:l,MAJOR:j,VERSION:o},A.CPU={ARCHITECTURE:p},A.DEVICE={MODEL:k,VENDOR:n,TYPE:m,CONSOLE:q,MOBILE:r,SMARTTV:t,TABLET:s,WEARABLE:u,EMBEDDED:v},A.ENGINE={NAME:l,VERSION:o},A.OS={NAME:l,VERSION:o},typeof exports!==g?(typeof module!==g&&module.exports&&(exports=module.exports=A),exports.UAParser=A):typeof define===f&&define.amd&&define("ua-parser-js",[],function(){return A}),a.UAParser=A;var B=a.jQuery||a.Zepto;if(typeof B!==g){var C=new A;B.ua=C.getResult(),B.ua.get=function(){return C.getUA()},B.ua.set=function(a){C.setUA(a);var b=C.getResult();for(var c in b)B.ua[c]=b[c]}}}("object"==typeof window?window:this),function(a){a._adhoc_config_env_="production"}(window),function(adhoc,document,window,undefined){function _get_major_minor(a){if(!a)return"";var b=a.split("."),c="";return b.length>0&&(c+=b[0]),b.length>1&&(c+="."+b[1]),c}var _forEach=function(a,b){var c=a.length;if(c)for(var d=0;d<c;d++)b(a[d],d)};Object.keys=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1});var thisAdhoc=adhoc,protocol="dev"==window._adhoc_config_env_||"test"==window._adhoc_config_env_?"http:":"https:",ADHOC_GETFLAGS_URL=protocol+"//experiment.appadhoc.com/get_flags_async",ADHOC_FORCEEXP_URL=protocol+"//experiment.appadhoc.com/force_clients",ADHOC_TRACKING_URL=protocol+"//tracker.appadhoc.com/tracker",EXP_CONTROL="CONTROL",JSON=JSON||{},timeout=0,oFlagDef={},getFlagsCallback=null,getFlagsCallbackError=null,getExpsCallback=null,getExpsCallbackError=null,query_started=!1,expCookieName=null,cachedStats=[],noStorage=!1,usedFlags=[],usedAutoFlags=[],usedExps=[],usedAutoExps=[],trackIds=[],referrerParams=null,experimentStatus=0,allowingSpider=!1,overlay=!0;Date.now=Date.now||function(){return(new Date).getTime()},JSON.stringify=window.JSON.stringify||function(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,d,e=[],f=a&&a.constructor==Array;for(c in a)d=a[c],b=typeof d,"string"==b?d='"'+d+'"':"object"==b&&null!==d&&(d=JSON.stringify(d)),"function"!=b&&e.push((f?"":'"'+c+'":')+String(d));return(f?"[":"{")+String(e)+(f?"]":"}")},JSON.parse=window.JSON.parse||function(str){return eval("("+str+")")};var getCookie=function(a){for(var b=encodeURIComponent(a),c=b+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0===f.indexOf(b)){var g=f.substring(c.length,f.length);return decodeURIComponent(g)}}return null},setCookie=function(a,b,c){var d="";if(c)var e=new Date(Date.now()+24*c*60*60*1e3),d="; expires="+e.toUTCString();var f=encodeURIComponent(a)+"="+encodeURIComponent(b)+d+"; path=/";document.cookie=f},getStorageItem=function(a){var b=window.localStorage;return b?b.getItem(a):getCookie(a)},setStorageItem=function(a,b){var c=window.localStorage;c?c.setItem(a,b):setCookie(a,b)},getCachedFlags=function(){return thisAdhoc.cachedFlags||noStorage||_updateCachedFlags(),thisAdhoc.cachedFlags},_updateCachedFlags=function(a){var b="ADHOC_FLAGS_"+thisAdhoc.ak;a?setStorageItem(b,a):a=getStorageItem(b);var c=a?JSON.parse(a):{};for(var d in c)"_http"==d.substr(0,5)&&"_"==d.substr(d.length-1)&&"string"==typeof c[d]&&(c[d]=decodeURIComponent(c[d]));thisAdhoc.cachedFlags=c},getCachedExperiments=function(){return thisAdhoc.cachedExps||noStorage||_updateCachedExps(),thisAdhoc.cachedExps},getCachedExperiments4Stat=function(){return usedExps.concat(usedAutoExps)},_updateCachedExps=function(a){var b="ADHOC_EXPERIMENTS_"+thisAdhoc.ak;a?setStorageItem(b,a):a=getStorageItem(b);var c=[],d=[];a&&(d=a.split(",")),_forEach(d,function(a){var b=a.split(":"),d=b[0],e=b[1],f=b.splice(2,b.length);d&&e&&c.push({id:d,name:e,flags:f})}),thisAdhoc.cachedExps=c,thisAdhoc.experiments=[],_forEach(c,function(a){thisAdhoc.experiments.push(a.id)})},_getQueryString=function(a,b){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),d=b||location.href,e=d.indexOf("?");e>-1&&(d=d.substr(e,d.length));var f=d.substr(1).match(c);return null!=f?decodeURI(f[2]):null},_getsummary=function(){var a=new UAParser,b=a.getResult(),c=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",d="",e="",f=c.indexOf("-");if(f>0&&(d=c.substr(f+1).toUpperCase(),c=c.substr(0,f),e=c+"_"+d),"iOS"==b.os.name?b.os.name="iPhone OS":"Android"==b.os.name?b.os.name="google_android":"Windows"==b.os.name&&"mobile"!=b.device.type?b.device.type="PC":"Mac OS"==b.os.name&&"mobile"!=b.device.type&&(b.device.type="Mac"),"Mobile Safari"==b.browser.name?b.browser.name="Safari":"IEMobile"==b.browser.name?b.browser.name="IE":"Opera Mini"==b.browser.name&&(b.browser.name="Opera"),thisAdhoc.summary={sdk_api_version:"2.0",sdk_version:"2.1.0",OS:b.os.name||"",os_version:_get_major_minor(b.os.version),os_version_name:b.os.version||"",device_model:b.device.model||navigator.platform||"",country:d,language:c,locale:e,display_height:window.innerHeight||document.documentElement.clientHeight,display_width:window.innerWidth||document.documentElement.clientWidth,device_type:b.device.type||"",device_vendor:b.device.vendor||"",url:window.location.href,referrer:document.referrer,browser:b.browser.name||"",browser_version:_get_major_minor(b.browser.version),browser_version_name:b.browser.version||"",browser_engine:b.engine.name||""},!b.browser.name||!b.browser.version||!b.engine.name){var g=b.ua.match(/(bot|crawl|slurp|spider)/i);g&&(thisAdhoc.summary.browser="__spider__")}},_getexpflags=function(){if(!query_started){var a={app_key:thisAdhoc.ak,client_id:thisAdhoc.c,summary:thisAdhoc.summary,custom:thisAdhoc.customs};query_started=!0,AJAX(ADHOC_GETFLAGS_URL,a,_getflags_handler,_getflags_error_handler)}},_incrementStatArray=function(a,b,c,d){var e={app_key:thisAdhoc.ak,client_id:thisAdhoc.c,summary:thisAdhoc.summary,custom:thisAdhoc.customs,stats:b};AJAX(ADHOC_TRACKING_URL,e,d,c)},_incrementStat=function(a,b,c,d,e){a.length||(a=[EXP_CONTROL]);var f={key:b,value:c,timestamp:Math.round(Date.now()/1e3),experiment_ids:a},g=[f];_incrementStatArray(a,g,d,e)},_getflags_error_handler=function(a){"function"==typeof getFlagsCallback&&(getFlagsCallback(_initFlagsObject(oFlagDef),!0),getFlagsCallback=null),"function"==typeof getFlagsCallbackError&&(getFlagsCallbackError(a),getFlagsCallbackError=null),"function"==typeof getExpsCallbackError&&(getExpsCallbackError(a),getExpsCallbackError=null)},_getflags_handler=function(a){query_started=!1;var b=JSON.parse(a);if(b.flags){var c=JSON.parse(a);for(var d in c.flags)"_http"==d.substr(0,5)&&"_"==d.substr(d.length-1)&&"string"==typeof c.flags[d]&&(c.flags[d]=encodeURIComponent(c.flags[d]));_updateCachedFlags(JSON.stringify(c.flags))}var e=[];if(b.experiments){var f="";_forEach(b.experiments,function(a){a.name||(a.name=a.id),e.push(a.id),f.length>0&&(f+=","),f+=a.id+":"+a.name;for(var b=0;b<a.flags.length;b++){var c=a.flags[b];f+=":",f+=c}}),_updateCachedExps(f),expCookieName&&setCookie(expCookieName,f)}"function"==typeof getFlagsCallback&&(getFlagsCallback(_initFlagsObject(b.flags)),getFlagsCallback=null),"function"==typeof getExpsCallback&&(getExpsCallback(e),getExpsCallback=null)},AJAX=function(a,b,c,d){function e(a){if("function"==typeof d)return void d(a,f.status);throw new Error(a)}a=a||"",b=b||{};var f=new XMLHttpRequest;return f.onload=function(){"function"==typeof c&&c(this&&this.responseText)},f.onerror=function(){e(this.responseText)},"withCredentials"in f?(f.open("POST",a,!0),f.setRequestHeader("Content-Type","application/json;charset=UTF-8")):"undefined"!=typeof XDomainRequest&&(f=new XDomainRequest,a=a.replace(/http\w*\:/,window.location.protocol),f.onload=function(){"function"==typeof c&&c(this.responseText)},f.onerror=function(){e(this&&this.responseText)},f.open("POST",a)),b.app_key?(f.timeout=timeout,f.ontimeout=function(){e("timeout")},void f.send(JSON.stringify(b))):void e("Please pass parameters in the init method")},thisAdhoc=adhoc;thisAdhoc.summary={},thisAdhoc.customs={},thisAdhoc.setCustomTagsWithCookies=function(a){if(!(experimentStatus>0))for(var b={},c=0;c<a.length;c++)b[c]=getCookie(a[c]),thisAdhoc.customs[a[c]]=b[c]};var _getUrlAllParams=function(){var a=window.location.search,b={};if(a.indexOf("?")!=-1)for(var c,d=a.replace(/^\?/,"").split("&"),e=d.length,f=0;f<e;f++)d[f]&&(c=d[f].split("="),b[c[0]]=c[1]);return b};thisAdhoc.setCustomTagsWithQueryParams=function(a){if(!(experimentStatus>0))for(var b=_getUrlAllParams(),c=0;c<a.length;c++){var d=a[c];for(var e in b)e===d&&(thisAdhoc.customs[d]=b[e])}},thisAdhoc.setCustomTagsWithAllQueryParams=function(){if(!(experimentStatus>0)){var a=window.location.search;if(a.indexOf("?")!=-1)for(var b,c=a.replace(/^\?/,"").split("&"),d=c.length,e=0;e<d;e++)c[e]&&(b=c[e].split("="),thisAdhoc.customs[b[0]]=b[1])}},thisAdhoc.setCustomTags=function(a){if(!(experimentStatus>0))for(var b in a)thisAdhoc.customs[b]=a[b]},thisAdhoc.setTimeout=function(a){experimentStatus>0||(timeout=a)},thisAdhoc.setFlagDef=function(a){if(!(experimentStatus>0))for(var b in a)oFlagDef[b]=a[b]},thisAdhoc.setSavingExpsToCookie=function(a){experimentStatus>0||(expCookieName=a)},thisAdhoc.setAllowSpider=function(a){allowingSpider=a};var _generateClientId=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};thisAdhoc.getClientId=function(){return thisAdhoc.c},thisAdhoc.initSplit=function(a,b){if(!a)throw new Error("Needs an appKey, get it from web console please!");if(!b)throw new Error("Needs an clientId!");return _getsummary(),allowingSpider||"__spider__"!=thisAdhoc.summary.browser?(thisAdhoc.ak=a,thisAdhoc.c=b,void(noStorage=!0)):void(experimentStatus=3)};var init=function(a,b){if(!a)throw new Error("Needs an appKey, get it from web console please!");if(thisAdhoc.ak=a,_getsummary(),!allowingSpider&&"__spider__"==thisAdhoc.summary.browser)return void(experimentStatus=3);var c=getCookie("ADHOC_MEMBERSHIP_CLIENT_ID");(null==c||b&&b!=c)&&(c=b||_generateClientId(),setCookie("ADHOC_MEMBERSHIP_CLIENT_ID",c,365)),thisAdhoc.c=String(c),_getexpflags()};thisAdhoc.getCachedExperimentFlags=function(){if(!(experimentStatus>0))return getCachedFlags()},thisAdhoc.getExperimentFlags=function(a,b){if(experimentStatus>0)return void("function"==typeof b&&b("spider"));var c=getCachedFlags();return getCachedExperiments(),c&&Object.keys(c).length>0&&"function"==typeof a?void a(_initFlagsObject(c)):("function"==typeof a&&(getFlagsCallback=a),"function"==typeof b&&(getFlagsCallbackError=b),void _getexpflags())},thisAdhoc.getExperimentFlagsRemote=function(a,b){return experimentStatus>0?void("function"==typeof b&&b("spider")):(getFlagsCallback=function(b,c){"function"==typeof a&&(c&&(b=getCachedFlags()||b),a(b))},"function"==typeof b&&(getFlagsCallbackError=b),void _getexpflags())},thisAdhoc.getExperimentFlagsDirect=function(a){if(!(experimentStatus>0)){var b={app_key:thisAdhoc.ak,client_id:thisAdhoc.c,summary:thisAdhoc.summary,custom:thisAdhoc.customs};AJAX(ADHOC_GETFLAGS_URL,b,function(b){var c=JSON.parse(b);if(c){thisAdhoc.cachedFlags=c.flags;var d=[],e=[];c.experiments&&_forEach(c.experiments,function(a){a.name||(a.name=a.id),d.push(a.id),e.push({id:a.id,flags:a.flags,name:a.name})}),thisAdhoc.experiments=d,thisAdhoc.cachedExps=e,a&&a(_initFlagsObject(thisAdhoc.cachedFlags),thisAdhoc.cachedExps)}})}},thisAdhoc.getExperiments=function(a,b){if(experimentStatus>0)return void("function"==typeof b&&b("spider"));var c=getCachedExperiments();return c&&c.length>0&&"function"==typeof a?void a(c):("function"==typeof a&&(getExpsCallback=a),"function"==typeof b&&(getExpsCallbackError=b),void _getexpflags())},thisAdhoc.incrementStat=function(a,b,c,d){if(!(experimentStatus>0)){var e=getCachedExperiments4Stat();e&&e.length>0?_incrementStat(e,a,b,c,d):(e=[EXP_CONTROL],_incrementStat(e,a,b,c,d))}},thisAdhoc.incrementStatArray=function(a,b,c){if(!(experimentStatus>0)){var d=getCachedExperiments4Stat(),e=[];a&&_forEach(a,function(a){if("string"==typeof a&&e.push({key:a,value:1,experiment_ids:d,timestamp:Math.round(Date.now()/1e3)}),"object"==typeof a&&a&&a.hasOwnProperty("key")&&"string"==typeof a.key){var b=a.hasOwnProperty("val")&&"number"==typeof a.val?a.val:1;e.push({key:a.key,value:b,experiment_ids:d,timestamp:Math.round(Date.now()/1e3)})}}),d&&d.length>0?_incrementStatArray(d,e,b,c):(_forEach(e,function(a){a.experiment_ids=[EXP_CONTROL]}),_incrementStatArray(d,e,b,c))}},thisAdhoc.incrementStatDirect=function(a,b,c,d){0==usedExps.length?usedExps=[EXP_CONTROL]:null,_incrementStat(usedExps,a,b,c,d)},thisAdhoc.forceExperiment=function(a,b,c){if(!(experimentStatus>0)){var d={client_id:thisAdhoc.c,qr_code:a,app_key:thisAdhoc.ak};AJAX(ADHOC_FORCEEXP_URL,d,b,c)}};var _loadOverlay=function(){if(overlay){var a=document.createElement("style"),b="body{opacity:0 !important; filter:alpha(opacity=0) !important; background:none !important;}",c=document.getElementsByTagName("head")[0];a.setAttribute("id","_adhoc_ab_overlay_"),a.setAttribute("type","text/css"),a.styleSheet?a.styleSheet.cssText=b:a.appendChild(document.createTextNode(b)),c.appendChild(a),setTimeout(_finish,3e3)}},_finish=function(){var a=document.getElementById("_adhoc_ab_overlay_");a&&a.parentNode.removeChild(a)},_ready=function(a){setTimeout(function(){return"complete"===document.readyState?a():_ready(a)})};thisAdhoc.init=function(a,b){if(_loadOverlay(),isEditor()&&isAppKey(a))return initEditor(a);var c=_getQueryString("__adhoc_split_id__");if(c)return thisAdhoc.splitMode=!0,thisAdhoc.initSplit(a,c),void thisAdhoc.getExperimentFlagsDirect(_getAutoEditExperimentFlags);var d=_getQueryString("adhoc_force_client_id");return d?(thisAdhoc.initSplit(a,d),void thisAdhoc.getExperimentFlagsDirect(_getAutoEditExperimentFlags)):(init(a,b),void thisAdhoc.getExperimentFlags(_getAutoEditExperimentFlags))};var _regexpFactory=function(a){var b;switch(a.mode){case"startWith":b=new RegExp("^"+a.url);break;case"regex":a.regexp=a.regexp.replace(/\*/g,"[\\.=a-zA-Z0-9:/#?]*"),b=new RegExp(a.regexp);break;case"equal":b={test:function(b){return a.url===b}}}return b},_getAutoEditExperimentFlags=function(a){var b=a.all();if(!b)return _finish();var c;if(thisAdhoc.splitMode){if(!document.referrer)return;c=document.referrer}else c=window.location.href;var d=c.indexOf("?");d>-1&&(referrerParams=c.substr(d+1,c.length),c=c.substr(0,c.indexOf("?")));var e=[];for(var f in b){var g=b[f],h={};try{h=JSON.parse(g)}catch(i){continue}for(var j in h){var k=h[j];if(k&&k.hasOwnProperty("mode")){var l=_regexpFactory(k);l&&l.test(c)&&(_useAutoFlag(f),e.push(k.data))}}}!thisAdhoc.splitMode&&e.length>0&&usedAutoExps.length>0?_incrementPVState(null,function(){_render(e)}):(_incrementPVState([EXP_CONTROL]),_render(e))},_incrementPVState=function(a,b){_incrementStat(a||usedAutoExps,"Event-GET_EXPERIMENT_FLAGS",1,b,b)},_renderElement=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],e=undefined;switch(d.mode){case"domXpath":e=thisAdhoc.$(d.id);break;case"class":e=$("."+d.id)}if(e)switch(d.type){case"attr":e.setAttribute(d.key,d.val);break;case"html":e.outerHTML=d.val;break;case"text":e.innerText=d.val;break;case"style":e.setAttribute("style",d.val)}}},_onElement=function(a){if("domXpath"===a.mode)for(var b=a.elemId.length,c=0;c<b;c++){var d=a.elemId[c],e=thisAdhoc.$(d);if(e){var f=e.tagName.toLowerCase(),g=e.getAttribute("type");g?g=g.toLowerCase():null,"a"==f||"input"==f&&"submit"==g||"input"==f&&"image"==g||"button"==f&&"submit"==g?_cloneElmentAndAddEvent(e,a):_addEvent(e,"click",function(){_incrementStat(usedAutoExps,a.statName,1)})}}},_cloneElmentAndAddEvent=function(a,b){var c,d=!1,e=function(){d||(clearTimeout(c),a&&"function"==typeof a.click?a.click():null,d=!0)};if("a"!=a.tagName.toLowerCase()){var f=_findParentNodeByTag(a,"form");if(f){var g=!1;return void _addEvent(f,"submit",function(a){g||(a?a.preventDefault():null,_incrementStat(usedAutoExps,b.statName,1,null,function(){e()}),c=setTimeout(function(){e()},200),g=!0)})}}var h=a.parentNode,i=a.nextSibling,j=a.cloneNode(1);j.removeAttribute("onclick"),j.removeAttribute("href"),_addEvent(j,"click",function(){_incrementStat(usedAutoExps,b.statName,1,null,function(){e()}),c=setTimeout(function(){e()},200)}),a.style.display="none",i?h.insertBefore(j,i):h.appendChild(j)},_findParentNodeByTag=function(a,b){for(;a.parentNode.tagName.toLowerCase()==b||a==document;)a=a.parentNode;return a==document?null:a},_render=function(a){for(var b=[],c=[],d=0,e=a.length;d<e;d++){var f=a[d];if(f){if(!thisAdhoc.splitMode&&f.hasOwnProperty("newPageUrl")&&f.newPageUrl&&"http"==f.newPageUrl.substr(0,4)){var g=f.newPageUrl;if(g.indexOf("?")<0?g+="?":g.indexOf("=")>0&&(g+="&"),g+="__adhoc_split_id__="+thisAdhoc.getClientId(),referrerParams)for(var h=referrerParams.split("&"),i=0;i<h.length;i++){var j=h[i];if(j){var k=j.split("=");k[0].indexOf("adhoc_")===-1&&(g+="&",g+=h[i])}}return window.name=g,void(window.location.href=g)}if(f.hasOwnProperty("changes")&&b.push(f),f.hasOwnProperty("stats"))for(var l=0;l<f.stats.length;l++){var m=f.stats[l];c.push(m)}}}_ready(function(){_forEach(b,function(a){_renderElement(a.changes)}),_forEach(c,function(a){_onElement(a)}),_finish()})},_parseId=function(a){for(var b=[],c=a.split("/"),d=1;d<c.length;d++){var e=c[d],f=e.substr(0,e.indexOf("[")),g=parseInt(e.substr(e.indexOf("[")+1,e.length));b.push({name:f,index:g})}return b};thisAdhoc.$=function(a){for(var b=_parseId(a),c=document.body,d=0;d<b.length;d++){var e=b[d];if("body"!==e.name){var f=_getNodeByType(c.childNodes,e.name);if(c=f[e.index],!c)return null}}return c};var _getNodeByType=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];1===e.nodeType&&e.nodeName==b.toUpperCase()&&c.push(e)}return c},_addEvent=function(a,b,c,d,e,f){var g=a,h=!!f&&f,i=null;e&&(g=e===!0?d:e),i=function(a){return c.call(g,a)};try{a.addEventListener(b,i,h)}catch(j){try{a.attachEvent("on"+b,i)}catch(k){a["on"+b]=i}}},isAppKey=function(a){var b=_getQueryString("appKey",window.name);return b===a},isEditor=function(){return/openSDK/.test(window.name)},initEditor=function(a){var b=document.createElement("script");"dev"===window._adhoc_config_env_&&(b.src="http://localhost:8080/libs/require.js?v="+(new Date).getTime(),b.setAttribute("data-main","http://localhost:8080/adhoc-editor.js")),"test"===window._adhoc_config_env_&&(b.src="http://192.168.1.215/newsdk/adhoc-editor.js?v="+(new Date).getTime()),"production"===window._adhoc_config_env_&&(b.src="https://www.appadhoc.com/downloads/sdk/adhoc-editor.js?v="+(new Date).getTime()),window._adhoc_md5_=a;var c=document.getElementsByTagName("head")[0];c.appendChild(b)},_useFlag=function(a){if(usedFlags.indexOf(a)===-1&&usedFlags.push(a),_updateUsedExps(usedFlags,usedExps),usedExps.length>0){var b=_getTrackIds();_updateTrackIds(b),_incrementPVState(b)}},_uniquePush=function(a,b){a.indexOf(b)===-1&&a.push(b)},_useAutoFlag=function(a){_uniquePush(usedAutoFlags,a),_updateUsedExps(usedAutoFlags,usedAutoExps)},_updateUsedExps=function(a,b){for(var c=0,d=thisAdhoc.cachedExps.length;c<d;c++){var e=thisAdhoc.cachedExps[c],f=e.flags;if(f&&f.length){for(var g=0,h=0,i=f.length;h<i;h++){var j=f[h];a.indexOf(j)>-1&&g++}g==f.length&&_uniquePush(b,e.id)}}},_initFlagsObject=function(a){return{get:function(b){var c=a[b];return a&&a.hasOwnProperty(b)&&_useFlag(b),c},all:function(){return a}}},_getTrackIds=function(){var a=[];if(!trackIds.length)return usedExps;for(var b=0;b<usedExps.length;b++){var c=usedExps[b];trackIds.indexOf(c)===-1&&a.push(c)}return a},_updateTrackIds=function(a){for(var b=0;b<a.length;b++)_uniquePush(trackIds,a[b])},_unique=function(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c};thisAdhoc.setOverlay=function(a){overlay=a},thisAdhoc.loadOverlay=function(){_loadOverlay()},thisAdhoc.closeOverlay=function(){_finish()}}(window.adhoc="undefined"!=typeof Object.create?Object.create(null):{},document,window);