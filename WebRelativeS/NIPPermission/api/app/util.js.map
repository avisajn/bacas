{"version":3,"sources":["../src/util.js"],"names":["getDays","decryptCode","encryptCode","endDate","date","Date","y","getFullYear","m","getMonth","d","getDate","array","split","endTime","parseInt","nowTime","day","Number","key","code","keyHex","enc","Utf8","parse","decrypted","DES","decrypt","ciphertext","Base64","mode","ECB","padding","pad","Pkcs7","e","JSON","toString","obj","encrypted","encrypt"],"mappings":";;;;;;;;QAIgBA,O,GAAAA,O;QAoBAC,W,GAAAA,W;QAeAC,W,GAAAA,W;;AAvChB;;;;;;AAEA;AACA;AACO,SAASF,OAAT,CAAiBG,OAAjB,EAAyB;AAC/B,KAAIC,OAAO,IAAIC,IAAJ,EAAX;AACA,KAAIC,IAAIF,KAAKG,WAAL,EAAR;AACA,KAAIC,IAAIJ,KAAKK,QAAL,EAAR;AACA,KAAIC,IAAIN,KAAKO,OAAL,EAAR;;AAEA,KAAIC,QAAQT,QAAQU,KAAR,CAAc,GAAd,CAAZ;AACA,KAAIC,UAAU,IAAIT,IAAJ,CAASU,SAASH,MAAM,CAAN,CAAT,CAAT,EAA6BG,SAASH,MAAM,CAAN,CAAT,IAAqB,CAAlD,EAAqDG,SAASH,MAAM,CAAN,CAAT,CAArD,CAAd;AACA,KAAII,UAAU,IAAIX,IAAJ,CAASU,SAAST,CAAT,CAAT,EAAsBS,SAASP,CAAT,CAAtB,EAAmCO,SAASL,CAAT,CAAnC,CAAd;AACA,KAAIO,MAAM,CAACC,OAAOJ,OAAP,IAAkBI,OAAOF,OAAP,CAAnB,KAAuC,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAxD,CAAV;AACA,QAAOC,GAAP;AACA;;AAGD;AACA;;AAEA,IAAME,MAAM,UAAZ;;AAEA;AACO,SAASlB,WAAT,CAAqBmB,IAArB,EAA0B;AAChC,KAAIC,SAAS,mBAASC,GAAT,CAAaC,IAAb,CAAkBC,KAAlB,CAAwBL,GAAxB,CAAb;AACA,KAAIM,YAAY,IAAhB;AACA,KAAG;AACCA,cAAY,mBAASC,GAAT,CAAaC,OAAb,CAAqB,EAACC,YAAY,mBAASN,GAAT,CAAaO,MAAb,CAAoBL,KAApB,CAA0BJ,IAA1B,CAAb,EAArB,EAAoEC,MAApE,EAA4E;AACpFS,SAAM,mBAASA,IAAT,CAAcC,GADgE;AAEpFC,YAAS,mBAASC,GAAT,CAAaC;AAF8D,GAA5E,CAAZ;AAIH,EALD,CAKC,OAAMC,CAAN,EAAQ;AACR;AACA;AACD,QAAOC,KAAKZ,KAAL,CAAWC,UAAUY,QAAV,CAAmB,mBAASf,GAAT,CAAaC,IAAhC,CAAX,CAAP;AACA;;AAED;AACO,SAASrB,WAAT,CAAqBoC,GAArB,EAA0B;AAChC,KAAIjB,SAAS,mBAASC,GAAT,CAAaC,IAAb,CAAkBC,KAAlB,CAAwBL,GAAxB,CAAb;AACA,KAAIoB,YAAY,IAAhB;AACA,KAAG;AACFA,cAAY,mBAASb,GAAT,CAAac,OAAb,CAAqB,yBAAeF,GAAf,CAArB,EAA0CjB,MAA1C,EAAkD;AACvDS,SAAM,mBAASA,IAAT,CAAcC,GADmC;AAEvDC,YAAS,mBAASC,GAAT,CAAaC;AAFiC,GAAlD,CAAZ;AAIA,EALD,CAKC,OAAMC,CAAN,EAAQ;AACR;AACA;AACD,QAAOI,UAAUF,QAAV,EAAP;AACA","file":"util.js","sourcesContent":["import CryptoJS from 'crypto-js';\n\n// 得到结束日期距当前日期的天数\n// 俩日期相减，返回天数\nexport function getDays(endDate){\n\tlet date = new Date();\n\tlet y = date.getFullYear();\n\tlet m = date.getMonth();\n\tlet d = date.getDate();\n\n\tlet array = endDate.split(\"-\");\n\tlet endTime = new Date(parseInt(array[0]), parseInt(array[1]) - 1, parseInt(array[2]));\n\tlet nowTime = new Date(parseInt(y), parseInt(m), parseInt(d));\n\tlet day = (Number(endTime) - Number(nowTime)) / (1000 * 60 * 60 * 24);\n\treturn day;\n}\n\n\n// 使用 ECB ， PKCS5 或 PKCS7\n// \n\nconst key = 'bacanews';\n\n// 解密\nexport function decryptCode(code){\n\tlet keyHex = CryptoJS.enc.Utf8.parse(key);\n\tlet decrypted = null;\n\ttry{\n\t    decrypted = CryptoJS.DES.decrypt({ciphertext: CryptoJS.enc.Base64.parse(code)}, keyHex, {\n\t        mode: CryptoJS.mode.ECB,\n\t        padding: CryptoJS.pad.Pkcs7\n\t    });\n\t}catch(e){\n\t\treturn;\n\t}\n\treturn JSON.parse(decrypted.toString(CryptoJS.enc.Utf8));\n}\n\n// 加密\nexport function encryptCode(obj) {\n\tlet keyHex = CryptoJS.enc.Utf8.parse(key);\n\tlet encrypted = null;\n\ttry{\n\t\tencrypted = CryptoJS.DES.encrypt(JSON.stringify(obj), keyHex, {\n\t        mode: CryptoJS.mode.ECB,\n\t        padding: CryptoJS.pad.Pkcs7\n\t    });\n\t}catch(e){\n\t\treturn;\n\t}\n\treturn encrypted.toString();\n}\n"]}